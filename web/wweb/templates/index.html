{% extends "base.html" %}

{% block title %}Home{% endblock title %}

{% block body %}
<style>
  
@import url(https://unpkg.com/@webpixels/css@1.1.5/dist/index.css);

/* Bootstrap Icons */
@import url("https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.4.0/font/bootstrap-icons.min.css");

</style>

<!-- Dashboard -->
<div class="d-flex flex-column flex-lg-row h-lg-full bg-surface-secondary">

<!-- Title -->
<h1 class="h2 mb-0 ls-tight">STARS OF ABCD</h1>
</div>
<!-- Actions -->
<div class="col-sm-6 col-12 text-sm-end">
<div class="mx-n1">
</div>
</div>
</div>
<!-- Nav -->

</div>
</div>
</header>
<!-- Main -->
<main class="py-6 bg-surface-secondary">
<div class="container-fluid">
<!-- Card stats -->
<div class="row g-6 mb-6">
<div class="col-xl-3 col-sm-6 col-12">
<div class="card shadow border-0">
<div class="card-body">
<div class="row">
<div class="col">
<span class="h6 font-semibold text-muted text-sm d-block mb-2">Budget</span>
<span class="h3 font-bold mb-0">1<sup>st</sup> Rank</span><br>
<span class="h3 font-bold mb-0">1<sup>st</sup> Rank</span>
</div>
<div class="col-auto">
</div>
</div>
<div class="mt-2 mb-0 text-sm">
</div>
</div>
</div>
</div>
<div class="col-xl-3 col-sm-6 col-12">
<div class="card shadow border-0">
<div class="card-body">
<div class="row">
<div class="col">
<span class="h6 font-semibold text-muted text-sm d-block mb-2">New projects</span>
<span class="h3 font-bold mb-0">2<sup>nd</sup></span><br>
<span class="h3 font-bold mb-0">2<sup>nd</sup></span>
</div>
<div class="col-auto">
</div>
</div>
<div class="mt-2 mb-0 text-sm">
</div>
</div>
</div>
</div>
<div class="col-xl-3 col-sm-6 col-12">
<div class="card shadow border-0">
<div class="card-body">
<div class="row">
<div class="col">
<span class="h6 font-semibold text-muted text-sm d-block mb-2">Total hours</span>
<span class="h3 font-bold mb-0">3<sup>rd</span><br>
<span class="h3 font-bold mb-0">3<sup>rd</sup></span>
</sup></span>
</div>
<div class="col-auto">
</div>
</div>
</div>
</div>
</div>
<div class="card shadow border-0 mb-7">
<div class="card-header">
<h5 class="mb-0">Applications</h5>
</div>
<div class="result-table">
  <table class="table table">
  <thead>
  <tr>
  <th scope="col">STUDENT ID</th>
  <th scope="col">TOTAL MARKS</th>
  <th scope="col" id="marks-obtained-header">MARKS OBTAINED</th>
  <th scope="col">CONVERSION(%)</th>
  <th scope="col">STATUS</th>
  </tr>
  </thead>
  <tbody id="students-tbody">
  {% for i in form %}
  <tr>
  <td>{{i.roll_num}}</td>
  <td>625</td>
  <td><script>
  var result = {{i.fl}} + {{i.sl}} +{{i.hindi}}+{{i.ss}}+{{i.maths}}+{{i.science}};
  document.write(result);
  </script></td>
  <td>
  <script>
      var percentage=((result/625))*100+"%"
      document.write(percentage)
  </script>
  </td>
  <td id="cell{{i.roll_num}}">
      <script>
          var cell=document.getElementById("cell{{i.roll_num}}")
          if ({{i.fl}} < 40 || {{i.sl}}<35 || {{i.hindi}}<35 || {{i.ss}}<35 || {{i.maths}}<35 || {{i.science}}<35 ) 
          {
            document.write("FAIL")
            cell.style.backgroundColor="#f55361";
            cell.style.color="white";
          }
          else
          {
            document.write("PASS")
            cell.style.backgroundColor="#039c08";
            cell.style.color="white";
  
          }
        </script>
  </td>
  
  </tr>
  {% endfor %}
  </tbody>
  </table>
  </div>
  </div>
  
</div>
</div>
</main>
</div>

<script>
  var sortOrder = -1; // -1 for descending, 1 for ascending

  document.getElementById('marks-obtained-header').addEventListener('click', function () {
    sortOrder *= -1; // Toggle sort order
    sortTableByColumn('students-tbody', 2, sortOrder);
  });

  function sortTableByColumn(tableId, colIndex, sortOrder) {
    var table = document.getElementById(tableId);
    var rows = Array.from(table.rows);
    var sortedRows = rows.sort((a, b) => {
      var aText = a.cells[colIndex].innerText;
      var bText = b.cells[colIndex].innerText;
      return sortOrder * (parseFloat(bText) - parseFloat(aText));
    });

    table.innerHTML = '';
    sortedRows.forEach(row => table.appendChild(row));
  }
</script>
<head>
</head>



</div>

{% endblock body %}